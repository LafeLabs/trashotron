<!doctype html>
<html lang="en">
<head>  
    <meta charset="utf-8">

        <!--

TRASH MAGIC 

EVERYTHING IS PHYSICAL
EVERYTHING IS FRACTAL 
EVERYTHING IS RECURSIVE

NO MONEY
NO MINING
NO PROPERTY

LOOK AT THE FUNGI
LOOK AT THE INSECTS
LANGUAGE IS HOW THE MIND PARSES REALITY



    All Code, text, art, media, technology, and ideas CC0 PUBLIC DOMAIN



    -->
    
<link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA4A8AAO/vAADqrwAA6q8AAOqvAADqrwAA6q8AAOqvAADqrwAA7+8AAMAHAADf9wAAwAcAAPu/AAD4PwAA" rel="icon" type="image/x-icon" />


       <!--Stop Google:-->
    <META NAME="robots" CONTENT="noindex,nofollow">
   <title>HYPERCUBE</title>    
    <script src = "geometron.js"></script>
</head>
<body> 
<a href = "index.html">HOME</a>
<div>
    <canvas style = "display:none" id = "main"></canvas>
</div>
<table id = "cantable">
    <tr>
        <td>Q:</td><td><canvas></canvas></td>
    </tr>
    <tr>
        <td>W:</td><td><canvas></canvas></td>
    </tr>
    <tr>
        <td>E:</td><td><canvas></canvas></td>
    </tr>
    <tr>
        <td>R:</td><td><canvas></canvas></td>
    </tr>
    <tr>
        <td>T:</td><td><canvas></canvas></td>
    </tr>
    <tr>
        <td>Y:</td><td><canvas></canvas></td>
    </tr>
    <tr>
        <td>U:</td><td><canvas></canvas></td>
    </tr>
    <tr>
        <td>I:</td><td><canvas></canvas></td>
    </tr>
    <tr>
        <td>GLYPH:</td><td><canvas></canvas></td>
    </tr>
</table>

<table>
    <tr>
        <td>ADDRESS:</td><td id = "addressinput"></td>
        <td>ACTION:</td><td><input id = "actioninput"/></td>
        <td>CODE:</td><td><input id = "spellinput"/></td>
    </tr>
</table>
<script>
//05xx:qwertyui:0161,0167,0145,0162,0164,0171,0165,0151,
//04xx:asdfghjk:0141,0163,0144,0146,0147,0150,0152,0153,

keyboard = [
    "0141:0400,",
    "0163:0401,",
    "0144:0402,",
    "0146:0403,",
    "0147:0404,",
    "0150:0405,",
    "0152:0406,",
    "0153:0407,",
    "0161:0500,",
    "0167:0501,",
    "0145:0502,",
    "0162:0503,",
    "0164:0504,",
    "0171:0505,",
    "0165:0506,",
    "0151:0507,"
]; 

//05xx:qwertyui:0161,0167,0145,0162,0164,0171,0165,0151,
symbols0150x = [
    "01500:0333,0200,0336,0332,0336,0332,0330,0337,0161,0365,0333,0336,0331,0333,0337,0337,",
    "01501:0333,0200,0336,0332,0336,0332,0330,0337,0167,0365,0333,0336,0331,0333,0337,0337,",
    "01502:0333,0200,0336,0332,0336,0332,0330,0337,0145,0365,0333,0336,0331,0333,0337,0337,",
    "01503:0333,0200,0336,0332,0336,0332,0330,0337,0162,0365,0333,0336,0331,0333,0337,0337,",    
    "01504:0333,0200,0336,0332,0336,0332,0330,0337,0164,0365,0333,0336,0331,0333,0337,0337,",
    "01505:0333,0200,0336,0332,0336,0332,0330,0337,0171,0365,0333,0336,0331,0333,0337,0337,",
    "01506:0333,0200,0336,0332,0336,0332,0330,0337,0165,0365,0333,0336,0331,0333,0337,0337,",
    "01507:0333,0200,0336,0332,0336,0332,0330,0337,0151,0365,0333,0336,0331,0333,0337,0337,",        
    "01510:0333,0200,0336,0330,0332,0336,0325,0347,0337,0331,0333,0337,0320,"    
]

symbolsize = 30;
spellmargin = 5;
spellheight = symbolsize + 4*spellmargin;
spellwidth = 30*symbolsize + 4*spellmargin;

cans = document.getElementById("cantable").getElementsByTagName("canvas");
gvmArray  = [];

mainGVM = new GVM(document.getElementById("main"),spellwidth,spellheight);
mainGVM.importbytecode(hypercube);
mainGVM.importbytecode(keyboard);

for(var index = 0;index < cans.length;index++){
    var newGVM = new GVM(cans[index],spellwidth,spellheight);
    newGVM.x0 =spellmargin;
    newGVM.y0 = spellmargin + symbolsize;
    newGVM.unit = symbolsize;
    newGVM.importbytecode(hypercube);
    newGVM.importbytecode(keyboard);
    newGVM.importbytecode(symbols0150x);
    gvmArray.push(newGVM);
}

document.getElementById("actioninput").select();

canIndex = 8;
gvmArray[canIndex].glyph = gvmArray[8].hypercube[0510] + "0207,";
gvmArray[canIndex].spellGlyph(gvmArray[canIndex].glyph);
document.getElementById("addressinput").value = "0" + (0500 + canIndex).toString(8);
document.getElementById("addressinput").innerHTML = "0" + (0500 + canIndex).toString(8);
gvmArray[canIndex].canvas2d.style.backgroundColor = "#c0c0c0"; 


document.getElementById("actioninput").onkeypress = function(a) {
    var charCode = a.keyCode || a.which;
    localCursorAction = parseInt(mainGVM.hypercube[charCode],8);   
    gvmArray[canIndex].cursorAction(localCursorAction); 
    gvmArray[canIndex].clean();
    gvmArray[canIndex].spellGlyph(gvmArray[canIndex].cleanGlyph);    
    gvmArray[8].hypercube[0500 + canIndex] = gvmArray[canIndex].cleanGlyph;  
    this.value = "";
    savejson();
    
}
   

document.getElementById("actioninput").onkeydown = function(a) {
    var charCode = a.keyCode || a.which;
    if(charCode == 010) {
        gvmArray[canIndex].cursorAction(010);
    }
    if(charCode == 045){
        gvmArray[canIndex].cursorAction(020);             
    }
    if(charCode == 047){
        gvmArray[canIndex].cursorAction(021);   
    }

    if(charCode == 046){
        //up arrow: prev symbol
        gvmArray[canIndex].canvas2d.style.backgroundColor = "rgba(0,0,0,0)";
        gvmArray[canIndex].clean();
        gvmArray[canIndex].spellGlyph(gvmArray[canIndex].cleanGlyph);    
        gvmArray[8].hypercube[0500 + canIndex] = gvmArray[canIndex].cleanGlyph;
        
        canIndex--;
        if(canIndex < 0){
            canIndex =8;
        }
        gvmArray[canIndex].canvas2d.style.backgroundColor = "#c0c0c0";  
        gvmArray[canIndex].glyph = gvmArray[8].hypercube[0500 + canIndex] + "0207,";

        document.getElementById("addressinput").innerHTML = "0" + (0500 + canIndex).toString(8);
    }
    if(charCode == 050){
        //down arrow: next symbol
        gvmArray[canIndex].canvas2d.style.backgroundColor = "rgba(0,0,0,0)";
        gvmArray[canIndex].clean();
        gvmArray[canIndex].spellGlyph(gvmArray[canIndex].cleanGlyph);    
        gvmArray[8].hypercube[0500 + canIndex] = gvmArray[canIndex].cleanGlyph;
        
        canIndex++;
        if(canIndex > 8){
            canIndex = 0;
        }
        gvmArray[canIndex].canvas2d.style.backgroundColor = "#c0c0c0";  
        gvmArray[canIndex].glyph = gvmArray[8].hypercube[0500 + canIndex] + "0207,";

        document.getElementById("addressinput").innerHTML = "0" + (0500 + canIndex).toString(8);
    }
    
    this.value = "";
    document.getElementById("spellinput").value = gvmArray[8].cleanGlyph;
    gvmArray[canIndex].spellGlyph(gvmArray[canIndex].glyph);    
    savejson();
}

function savejson(){
    var cubedata = gvmArray[8].bytecode(0500,0510);
    var url = "filesaver.php";        
    var httpc = new XMLHttpRequest();
    httpc.open("POST", url, true);
    httpc.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    httpc.send("data="+encodeURIComponent(cubedata) + "&filename=data/trashotron-hypercube.txt");//send text to filesaver.php        
}

trashotronHypercube = [];
var httpc = new XMLHttpRequest();
httpc.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        trashotronHypercube = JSON.parse(this.responseText);
        mainGVM.importbytecode(trashotronHypercube);
        for(var index = 0;index < cans.length;index++){
            gvmArray[index].importbytecode(trashotronHypercube);
        }
        for(var index = 0;index < cans.length;index++){
            gvmArray[index].spellGlyph(mainGVM.hypercube[0500 + index]);
        }

    }
};
httpc.open("GET", "fileloader.php?filename=data/trashotron-hypercube.txt", true);
httpc.send();    

</script>
<style>
    #actioninput{
        width:0.5em;
    }
</style>
</body>
</html>


